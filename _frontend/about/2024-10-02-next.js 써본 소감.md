---
layout: post
title: "Next.js 써본 소감"
date: 2024-10-02
category: frontend_about
---
이번 스푸키 타운 프로젝트를 그냥 CRA(create react app) 명령어로  사용해서 만든 기존 프론트엔드를 next.js로 갈아끼웠다. 사용하면서 좀 드문드문 든 생각을 정리해보자.  나는 글을 작성하는 기준 next 15 버전에 리액트 19 버전을 사용했다. 뭐 다른 차이가 있겠지만 서버  액션이 내가 사용해본 기능 중에 제일 큰 차이일 거다. 서버 액션은 리액트에서 form  보내기 같은 액션을 지원하기 위해 만든 이 글 작성 기준 최신 훅useActionState를 만들었다. 간단하게 생각하면 백엔드 서버나 데이터베이스 등등 어떤 데이터를 보내려고 할 때 사용하는 작은 상태 관리 액션 함수라고 생각하면 간단하다. 액션은 성공하거나 실패할거고 그에 따라 반환값과 에러 값이 있다.

잘 구조화되게 선언해두고 사용하면 서버단에서 렌더링된 페이지의 form 보내기 등의 에러 핸들링이 편안하게 바뀐다. 가령 이메일 이름 비밀번호를 보냈는데 일부만 정책에 맞지 않아 반환되야 한다면 액션 함수에 잘 구조화 된 state error나 message 창에 경고문을 표현하게 하고 정책에 맞는 값은 이전 그대로 반환하게 할 수 있다. 실제로 사용해보면 꽤 깔끔하게 작동한다.

또 앱 라우터를 사용하면 기본적으로 app 디렉토리 하위 디렉토리명에 따라 라우터를 자동으로 배치 시켜 준다거나, 풀스택 프레임워크 인만큼 데이터 베이스 접근도 뭐 편하고  인증 인가.. supabase를 사용하긴 했지만 다른 걸로 갈아끼워도 아주 어렵지는 않아 보였다,

무엇보다 공식 문서가 보기 좋게 정리된 부분이 마음에 들었다. 스프링..은 최근엔 잘 모르겠는데 그렇게 친절한 문서는 아니었던 걸로 기억한다.

물론 누가 이게 작은 사이드 프로젝트에 잘 맞는가? 라고 묻는다며 잘 모르겠다. 이런 잘 추상화된 프레임워크의 공통점은 한마디로 복잡하다는 사실이다. 스프링 부트랑은 약간 궤가 다르지만 좀 무겁달지.. 사족이 많다는 생각도 좀 들었다. 

개인적으로 느낀 바는 정말 작은 프로젝트나 사이드 프로젝트 그리고 솔직히 취업 용도의 프폴이 아닌 거의 대부분의 프로젝트라면 스프링 부트는 뭔가 계륵일 수도 있겠단 생각이 점점 든다. 스프링 생태계의 잘 구현된 여러 스프링 프로젝트는 분명 편안하지만.. 이게 과연 작은 프로젝트에 필요할까?  근데 이런 생각이 next.js에서도 들었다.. 흠. CRA로 만든 프로젝트에서의 번거로움이 일부 해소되긴 했는데 굳이 여기까지 필요한가? 싶은 게 next.js다. 

리액트 공식문서에서 프로젝트 시작으로 Next.js를 밀고 있고 만들어보니 왜 그런지도 알겠는데.. 흠.

캐시 정책은 좀 이해가 안가는데 1시간을 걸었도 변하질 않는걸까 하다가 이거 뭔 값에 변화가 없으면 그냥 이전에 잘못된 데이터가 서버에 올라와도 안 바꾸는거 같다. 이부분은 좀 더 공부해봐야 할 것 같다.